<Page x:Class="Heimatplatz.App.Presentation.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:Heimatplatz.App.Presentation"
      xmlns:uen="using:Uno.Extensions.Navigation.UI"
      xmlns:utu="using:Uno.Toolkit.UI"
      NavigationCacheMode="Required"
      Background="{ThemeResource BackgroundBrush}"
      AutomationProperties.AutomationId="MainPage.Root">

    <!--
    ============================================================================
    NAVIGATIONVIEW WITH REGIONS
    ============================================================================
    MainPage uses NavigationView for hamburger menu navigation with regions.

    NavigationView provides:
    - Hamburger menu with adaptive behavior
    - NavigationViewItems with Region.Name for navigation
    - Content area that acts as a region for displaying pages

    Nested routes under /Main will be displayed in the NavigationView content region.
    ============================================================================
    -->

    <Grid uen:Region.Attached="True">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- App Header Region - Navigation erfolgt im Code-Behind, DataContext wird automatisch via ViewMap gesetzt -->
        <ContentControl Grid.Row="0"
                        uen:Region.Attached="True"
                        uen:Region.Name="AppHeader"
                        utu:SafeArea.Insets="Top"
                        HorizontalContentAlignment="Stretch"
                        AutomationProperties.AutomationId="MainPage.AppHeader" />

        <!-- NavigationView with Region-based navigation -->
        <NavigationView x:Name="NavView"
                        Grid.Row="1"
                        uen:Region.Attached="True"
                        PaneDisplayMode="Left"
                        IsBackButtonVisible="Collapsed"
                        IsSettingsVisible="False"
                        IsPaneToggleButtonVisible="False"
                        OpenPaneLength="256"
                        CompactModeThresholdWidth="640"
                        ExpandedModeThresholdWidth="1024"
                        Background="{ThemeResource BackgroundBrush}"
                        AutomationProperties.AutomationId="MainPage.NavigationView">

            <!-- Navigation Menu Items -->
            <NavigationView.MenuItems>
                <NavigationViewItem Content="Home"
                                    uen:Region.Name="Home"
                                    AutomationProperties.AutomationId="MainPage.NavItem.Home">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE80F;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Content="Meine Immobilien"
                                    uen:Region.Name="MyProperties"
                                    AutomationProperties.AutomationId="MainPage.NavItem.MyProperties">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE80F;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Content="Meine Favoriten"
                                    uen:Region.Name="Favorites"
                                    AutomationProperties.AutomationId="MainPage.NavItem.Favorites">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE734;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Content="Blockierte Immobilien"
                                    uen:Region.Name="Blocked"
                                    AutomationProperties.AutomationId="MainPage.NavItem.Blocked">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE8F8;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItemSeparator />

                <NavigationViewItem Content="Immobilie hinzufuegen"
                                    uen:Region.Name="AddProperty"
                                    AutomationProperties.AutomationId="MainPage.NavItem.AddProperty">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE710;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.MenuItems>

            <!-- Footer Menu Items (Settings, etc.) -->
            <NavigationView.FooterMenuItems>
                <NavigationViewItem Content="Benachrichtigungen"
                                    uen:Region.Name="NotificationSettings"
                                    AutomationProperties.AutomationId="MainPage.NavItem.NotificationSettings">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xEA8F;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Content="Filtereinstellungen"
                                    uen:Region.Name="FilterPreferences"
                                    AutomationProperties.AutomationId="MainPage.NavItem.FilterPreferences">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE71C;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.FooterMenuItems>

            <!-- Content Region: Pages are displayed here -->
            <NavigationView.Content>
                <ContentControl x:Name="NavigationContent"
                                uen:Region.Attached="True"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                HorizontalContentAlignment="Stretch"
                                VerticalContentAlignment="Stretch"
                                AutomationProperties.AutomationId="MainPage.ContentRegion" />
            </NavigationView.Content>
        </NavigationView>
    </Grid>
</Page>
