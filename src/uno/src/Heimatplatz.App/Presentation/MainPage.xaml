<Page x:Class="Heimatplatz.App.Presentation.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:Heimatplatz.App.Presentation"
      xmlns:uen="using:Uno.Extensions.Navigation.UI"
      xmlns:utu="using:Uno.Toolkit.UI"
      NavigationCacheMode="Required"
      Background="{ThemeResource BackgroundBrush}"
      AutomationProperties.AutomationId="MainPage.Root">

    <!--
    ============================================================================
    LAYOUT WITH 3 HEADER REGIONS AND NAVIGATIONVIEW
    ============================================================================
    Row 0: Header with 3 regions: HeaderLeft (Auto) | HeaderMain (*) | HeaderRight (Auto)
    Row 1: NavigationView with content region

    HeaderLeft: Hamburger/Back button + Logo/Title
    HeaderMain: Page-specific header content (e.g., HomeFilterBar) - only visible on Wide screens
    HeaderRight: Auth buttons (Login/Register or User Profile)
    ============================================================================
    -->

    <Grid uen:Region.Attached="True">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Row 0: Header with 3 Regions -->
        <Border Grid.Row="0"
                Background="{ThemeResource SurfaceBrush}"
                BorderBrush="{ThemeResource BorderBrush}"
                BorderThickness="0,0,0,1"
                Padding="{utu:Responsive Narrowest='4,10', Normal='8,12'}"
                utu:SafeArea.Insets="Top"
                AutomationProperties.AutomationId="MainPage.HeaderContainer">

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />  <!-- HeaderLeft -->
                    <ColumnDefinition Width="*" />     <!-- HeaderMain -->
                    <ColumnDefinition Width="Auto" />  <!-- HeaderRight -->
                </Grid.ColumnDefinitions>

                <!-- HeaderLeft Region: Hamburger/Back + Logo -->
                <ContentControl Grid.Column="0"
                                uen:Region.Attached="True"
                                uen:Region.Name="HeaderLeft"
                                VerticalContentAlignment="Center"
                                AutomationProperties.AutomationId="MainPage.HeaderLeft" />

                <!-- HeaderMain Region: Page-specific content (Wide screens only) -->
                <ContentControl x:Name="HeaderMainContent"
                                Grid.Column="1"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Visibility="{utu:Responsive Normal=Collapsed, Wide=Visible}"
                                AutomationProperties.AutomationId="MainPage.HeaderMain" />

                <!-- HeaderRight Region: Auth buttons -->
                <ContentControl Grid.Column="2"
                                uen:Region.Attached="True"
                                uen:Region.Name="HeaderRight"
                                VerticalContentAlignment="Center"
                                AutomationProperties.AutomationId="MainPage.HeaderRight" />
            </Grid>
        </Border>

        <!-- NavigationView with Region-based navigation -->
        <!-- IsPaneVisible nur wenn eingeloggt -->
        <NavigationView x:Name="NavView"
                        Grid.Row="1"
                        uen:Region.Attached="True"
                        PaneDisplayMode="Left"
                        IsPaneVisible="{Binding IsAuthenticated}"
                        IsPaneOpen="False"
                        IsBackButtonVisible="Collapsed"
                        IsSettingsVisible="False"
                        IsPaneToggleButtonVisible="False"
                        OpenPaneLength="256"
                        CompactModeThresholdWidth="640"
                        ExpandedModeThresholdWidth="1024"
                        Background="{ThemeResource BackgroundBrush}"
                        AutomationProperties.AutomationId="MainPage.NavigationView">

            <!-- Navigation Menu Items -->
            <NavigationView.MenuItems>
                <NavigationViewItem Content="Home"
                                    uen:Region.Name="Home"
                                    AutomationProperties.AutomationId="MainPage.NavItem.Home">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE80F;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Content="Meine Immobilien"
                                    uen:Region.Name="MyProperties"
                                    AutomationProperties.AutomationId="MainPage.NavItem.MyProperties">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE80F;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Content="Meine Favoriten"
                                    uen:Region.Name="Favorites"
                                    AutomationProperties.AutomationId="MainPage.NavItem.Favorites">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE734;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Content="Blockierte Immobilien"
                                    uen:Region.Name="Blocked"
                                    AutomationProperties.AutomationId="MainPage.NavItem.Blocked">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE8F8;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItemSeparator />

                <NavigationViewItem Content="Immobilie hinzufuegen"
                                    uen:Region.Name="AddProperty"
                                    AutomationProperties.AutomationId="MainPage.NavItem.AddProperty">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE710;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.MenuItems>

            <!-- Footer Menu Items (Settings, etc.) -->
            <NavigationView.FooterMenuItems>
                <NavigationViewItem Content="Benachrichtigungen"
                                    uen:Region.Name="NotificationSettings"
                                    AutomationProperties.AutomationId="MainPage.NavItem.NotificationSettings">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xEA8F;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItem Content="Filtereinstellungen"
                                    uen:Region.Name="FilterPreferences"
                                    AutomationProperties.AutomationId="MainPage.NavItem.FilterPreferences">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE71C;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.FooterMenuItems>

            <!-- Content Region: Pages are displayed here -->
            <NavigationView.Content>
                <ContentControl x:Name="NavigationContent"
                                uen:Region.Attached="True"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                HorizontalContentAlignment="Stretch"
                                VerticalContentAlignment="Stretch"
                                AutomationProperties.AutomationId="MainPage.ContentRegion" />
            </NavigationView.Content>
        </NavigationView>
    </Grid>
</Page>
