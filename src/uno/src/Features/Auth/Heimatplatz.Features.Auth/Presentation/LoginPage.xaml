<Page x:Class="Heimatplatz.Features.Auth.Presentation.LoginPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:Heimatplatz.Features.Auth.Presentation"
      xmlns:utu="using:Uno.Toolkit.UI"
      xmlns:uen="using:Uno.Extensions.Navigation.UI"
      xmlns:uc="using:UnoFramework.Controls"
      Background="{ThemeResource BackgroundBrush}">

    <!--
    LoginPage - Editorial Luxury Design
    Konsistent mit RegisterPage
    Desktop: Elegantes Split-Layout
    Mobile: Kompaktes Single-Column Layout
    -->

    <uc:BusyOverlay IsBusy="{Binding IsBusy}"
                    BusyMessage="{Binding BusyMessage}">

        <utu:ResponsiveView>

            <!-- Desktop Layout (Wide) -->
            <utu:ResponsiveView.WideTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" MaxWidth="520" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!-- Left: Form Panel -->
                        <Border Grid.Column="0"
                                Background="{ThemeResource SurfaceBrush}">
                            <ScrollViewer VerticalScrollBarVisibility="Auto"
                                          HorizontalAlignment="Stretch">
                                <StackPanel Padding="48,48"
                                            Spacing="32"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Center">

                                    <!-- Back Button -->
                                    <Button uen:Navigation.Request="-"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Padding="0"
                                            Margin="0,0,0,8">
                                        <StackPanel Orientation="Horizontal" Spacing="8">
                                            <FontIcon Glyph="&#xE72B;"
                                                      FontSize="14"
                                                      Foreground="{ThemeResource OnSurfaceVariantBrush}" />
                                            <TextBlock Text="Zurück"
                                                       FontSize="13"
                                                       Foreground="{ThemeResource OnSurfaceVariantBrush}" />
                                        </StackPanel>
                                    </Button>

                                    <!-- Title Section -->
                                    <StackPanel Spacing="8">
                                        <TextBlock Text="Willkommen zurück"
                                                   FontSize="28"
                                                   FontWeight="Bold"
                                                   Foreground="{ThemeResource OnSurfaceBrush}" />
                                        <TextBlock Text="Melden Sie sich an, um Ihre gespeicherten Immobilien zu sehen"
                                                   FontSize="14"
                                                   Foreground="{ThemeResource OnSurfaceVariantBrush}"
                                                   TextWrapping="Wrap" />
                                    </StackPanel>

                                    <!-- Error Message -->
                                    <Border Background="{ThemeResource ErrorBrush}"
                                            CornerRadius="{StaticResource RadiusSm}"
                                            Padding="16"
                                            Visibility="{Binding ErrorMessage, Converter={StaticResource NullToCollapsedConverter}}">
                                        <StackPanel Orientation="Horizontal" Spacing="12">
                                            <FontIcon Glyph="&#xE7BA;"
                                                      FontSize="16"
                                                      Foreground="White" />
                                            <TextBlock Text="{Binding ErrorMessage}"
                                                       Foreground="White"
                                                       FontSize="13"
                                                       TextWrapping="Wrap"
                                                       VerticalAlignment="Center" />
                                        </StackPanel>
                                    </Border>

                                    <!-- Form Fields -->
                                    <StackPanel Spacing="20">

                                        <!-- E-Mail -->
                                        <StackPanel Spacing="8">
                                            <TextBlock Text="E-Mail Adresse"
                                                       FontSize="13"
                                                       FontWeight="SemiBold"
                                                       Foreground="{ThemeResource OnSurfaceBrush}" />
                                            <TextBox Text="{Binding Email, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     PlaceholderText="max@beispiel.at"
                                                     Padding="12,14"
                                                     CornerRadius="{StaticResource RadiusSm}" />
                                        </StackPanel>

                                        <!-- Passwort -->
                                        <StackPanel Spacing="8">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0"
                                                           Text="Passwort"
                                                           FontSize="13"
                                                           FontWeight="SemiBold"
                                                           Foreground="{ThemeResource OnSurfaceBrush}" />
                                                <TextBlock Grid.Column="1"
                                                           Text="Passwort vergessen?"
                                                           FontSize="12"
                                                           Foreground="{ThemeResource PrimaryBrush}"
                                                           VerticalAlignment="Center" />
                                            </Grid>
                                            <PasswordBox Password="{Binding Passwort, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                         PlaceholderText="Ihr Passwort"
                                                         Padding="12,14"
                                                         CornerRadius="{StaticResource RadiusSm}" />
                                        </StackPanel>

                                    </StackPanel>

                                    <!-- Login Button - Prominent CTA -->
                                    <Button Content="Anmelden"
                                            Command="{Binding LoginCommand}"
                                            Background="{ThemeResource PrimaryButtonBackgroundBrush}"
                                            Foreground="{ThemeResource PrimaryButtonForegroundBrush}"
                                            FontWeight="SemiBold"
                                            FontSize="15"
                                            Height="52"
                                            CornerRadius="{StaticResource RadiusSm}"
                                            HorizontalAlignment="Stretch"
                                            HorizontalContentAlignment="Center" />

                                    <!-- Register Link -->
                                    <StackPanel Orientation="Horizontal"
                                                HorizontalAlignment="Center"
                                                Spacing="6">
                                        <TextBlock Text="Noch kein Konto?"
                                                   FontSize="14"
                                                   Foreground="{ThemeResource OnSurfaceVariantBrush}" />
                                        <Button uen:Navigation.Request="Register"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                Padding="0"
                                                MinHeight="0"
                                                MinWidth="0">
                                            <TextBlock Text="Registrieren"
                                                       FontSize="14"
                                                       FontWeight="SemiBold"
                                                       Foreground="{ThemeResource PrimaryBrush}" />
                                        </Button>
                                    </StackPanel>

                                </StackPanel>
                            </ScrollViewer>
                        </Border>

                        <!-- Right: Hero Panel - Welcoming Branding -->
                        <Border Grid.Column="1"
                                Background="{ThemeResource PrimaryButtonBackgroundBrush}">
                            <Grid>
                                <!-- Subtle geometric accent -->
                                <Ellipse Width="400"
                                         Height="400"
                                         Fill="White"
                                         Opacity="0.03"
                                         HorizontalAlignment="Right"
                                         VerticalAlignment="Bottom"
                                         Margin="0,0,-100,-100" />

                                <StackPanel VerticalAlignment="Center"
                                            HorizontalAlignment="Left"
                                            Margin="64,0">
                                    <TextBlock Text="HEIMATPLATZ"
                                               FontSize="42"
                                               FontWeight="Bold"
                                               CharacterSpacing="100"
                                               Foreground="{ThemeResource PrimaryButtonForegroundBrush}" />
                                    <TextBlock Text="Ihre Immobilien-Favoriten warten auf Sie"
                                               FontSize="16"
                                               Foreground="{ThemeResource PrimaryButtonForegroundBrush}"
                                               Opacity="0.9"
                                               Margin="0,16,0,0"
                                               TextWrapping="Wrap"
                                               MaxWidth="360" />
                                </StackPanel>
                            </Grid>
                        </Border>

                    </Grid>
                </DataTemplate>
            </utu:ResponsiveView.WideTemplate>

            <!-- Mobile Layout (Narrow) - Compact Editorial -->
            <utu:ResponsiveView.NarrowTemplate>
                <DataTemplate>
                    <Grid utu:SafeArea.Insets="All"
                          Background="{ThemeResource SurfaceBrush}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <!-- Compact Header with Back -->
                        <Border Grid.Row="0"
                                Background="{ThemeResource PrimaryButtonBackgroundBrush}"
                                Padding="20,16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <!-- Back Button -->
                                <Button Grid.Column="0"
                                        uen:Navigation.Request="-"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Padding="0"
                                        VerticalAlignment="Center">
                                    <FontIcon Glyph="&#xE72B;"
                                              FontSize="18"
                                              Foreground="{ThemeResource PrimaryButtonForegroundBrush}" />
                                </Button>

                                <!-- Centered Title -->
                                <TextBlock Grid.Column="1"
                                           Text="HEIMATPLATZ"
                                           FontSize="14"
                                           FontWeight="Bold"
                                           CharacterSpacing="150"
                                           Foreground="{ThemeResource PrimaryButtonForegroundBrush}"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center" />
                            </Grid>
                        </Border>

                        <!-- Scrollable Form Section -->
                        <ScrollViewer Grid.Row="1">
                            <StackPanel Padding="24,32"
                                        Spacing="28">

                                <!-- Title Section -->
                                <StackPanel Spacing="8">
                                    <TextBlock Text="Willkommen zurück"
                                               FontSize="24"
                                               FontWeight="Bold"
                                               Foreground="{ThemeResource OnSurfaceBrush}" />
                                    <TextBlock Text="Melden Sie sich an, um fortzufahren"
                                               FontSize="14"
                                               Foreground="{ThemeResource OnSurfaceVariantBrush}"
                                               TextWrapping="Wrap" />
                                </StackPanel>

                                <!-- Error Message -->
                                <Border Background="{ThemeResource ErrorBrush}"
                                        CornerRadius="{StaticResource RadiusSm}"
                                        Padding="14"
                                        Visibility="{Binding ErrorMessage, Converter={StaticResource NullToCollapsedConverter}}">
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <FontIcon Glyph="&#xE7BA;"
                                                  FontSize="14"
                                                  Foreground="White" />
                                        <TextBlock Text="{Binding ErrorMessage}"
                                                   Foreground="White"
                                                   FontSize="13"
                                                   TextWrapping="Wrap"
                                                   VerticalAlignment="Center" />
                                    </StackPanel>
                                </Border>

                                <!-- Form Fields -->
                                <StackPanel Spacing="18">

                                    <!-- E-Mail -->
                                    <StackPanel Spacing="6">
                                        <TextBlock Text="E-Mail Adresse"
                                                   FontSize="13"
                                                   FontWeight="SemiBold"
                                                   Foreground="{ThemeResource OnSurfaceBrush}" />
                                        <TextBox Text="{Binding Email, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                 PlaceholderText="max@beispiel.at"
                                                 Padding="12,14"
                                                 CornerRadius="{StaticResource RadiusSm}" />
                                    </StackPanel>

                                    <!-- Passwort -->
                                    <StackPanel Spacing="6">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Grid.Column="0"
                                                       Text="Passwort"
                                                       FontSize="13"
                                                       FontWeight="SemiBold"
                                                       Foreground="{ThemeResource OnSurfaceBrush}" />
                                            <TextBlock Grid.Column="1"
                                                       Text="Vergessen?"
                                                       FontSize="12"
                                                       Foreground="{ThemeResource PrimaryBrush}"
                                                       VerticalAlignment="Center" />
                                        </Grid>
                                        <PasswordBox Password="{Binding Passwort, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     PlaceholderText="Ihr Passwort"
                                                     Padding="12,14"
                                                     CornerRadius="{StaticResource RadiusSm}" />
                                    </StackPanel>

                                </StackPanel>

                                <!-- Login Button -->
                                <Button Content="Anmelden"
                                        Command="{Binding LoginCommand}"
                                        Background="{ThemeResource PrimaryButtonBackgroundBrush}"
                                        Foreground="{ThemeResource PrimaryButtonForegroundBrush}"
                                        FontWeight="SemiBold"
                                        FontSize="15"
                                        Height="52"
                                        CornerRadius="{StaticResource RadiusSm}"
                                        HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Center" />

                                <!-- Register Link -->
                                <StackPanel Orientation="Horizontal"
                                            HorizontalAlignment="Center"
                                            Spacing="6">
                                    <TextBlock Text="Noch kein Konto?"
                                               FontSize="14"
                                               Foreground="{ThemeResource OnSurfaceVariantBrush}" />
                                    <Button uen:Navigation.Request="Register"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Padding="0"
                                            MinHeight="0"
                                            MinWidth="0">
                                        <TextBlock Text="Registrieren"
                                                   FontSize="14"
                                                   FontWeight="SemiBold"
                                                   Foreground="{ThemeResource PrimaryBrush}" />
                                    </Button>
                                </StackPanel>

                            </StackPanel>
                        </ScrollViewer>

                    </Grid>
                </DataTemplate>
            </utu:ResponsiveView.NarrowTemplate>

        </utu:ResponsiveView>

    </uc:BusyOverlay>

</Page>
