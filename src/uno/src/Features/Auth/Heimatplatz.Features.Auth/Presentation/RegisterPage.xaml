<Page x:Class="Heimatplatz.Features.Auth.Presentation.RegisterPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:Heimatplatz.Features.Auth.Presentation"
      xmlns:utu="using:Uno.Toolkit.UI"
      xmlns:uen="using:Uno.Extensions.Navigation.UI"
      xmlns:uc="using:UnoFramework.Controls"
      Background="{ThemeResource BackgroundBrush}">

    <!--
    RegisterPage - Editorial Luxury Design
    Desktop: Elegantes Split-Layout mit geometrischem Hero
    Mobile: Kompaktes Single-Column Layout
    -->

    <uc:BusyOverlay IsBusy="{Binding IsBusy}"
                    BusyMessage="{Binding BusyMessage}">

        <utu:ResponsiveView>

            <!-- Desktop Layout (Wide) -->
            <utu:ResponsiveView.WideTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" MaxWidth="600" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!-- Left: Form Panel - Full Width -->
                        <Border Grid.Column="0"
                                Background="{ThemeResource SurfaceBrush}">
                            <ScrollViewer VerticalScrollBarVisibility="Auto"
                                          HorizontalAlignment="Stretch">
                                <StackPanel Padding="48,48"
                                            Spacing="32"
                                            HorizontalAlignment="Stretch">

                                    <!-- Back Button -->
                                    <Button uen:Navigation.Request="-"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Padding="0"
                                            Margin="0,0,0,16">
                                        <StackPanel Orientation="Horizontal" Spacing="8">
                                            <FontIcon Glyph="&#xE72B;"
                                                      FontSize="14"
                                                      Foreground="{ThemeResource OnSurfaceVariantBrush}" />
                                            <TextBlock Text="Zurück"
                                                       FontSize="13"
                                                       Foreground="{ThemeResource OnSurfaceVariantBrush}" />
                                        </StackPanel>
                                    </Button>

                                    <!-- Title Section -->
                                    <StackPanel Spacing="8">
                                        <TextBlock Text="Konto erstellen"
                                                   FontSize="28"
                                                   FontWeight="Bold"
                                                   Foreground="{ThemeResource OnSurfaceBrush}" />
                                        <TextBlock Text="Registrieren Sie sich für exklusive Immobilien-Angebote in Oberösterreich"
                                                   FontSize="14"
                                                   Foreground="{ThemeResource OnSurfaceVariantBrush}"
                                                   TextWrapping="Wrap" />
                                    </StackPanel>

                                    <!-- Error Message -->
                                    <Border Background="{ThemeResource ErrorBrush}"
                                            CornerRadius="{StaticResource RadiusSm}"
                                            Padding="16"
                                            Visibility="{Binding ErrorMessage, Converter={StaticResource NullToCollapsedConverter}}">
                                        <StackPanel Orientation="Horizontal" Spacing="12">
                                            <FontIcon Glyph="&#xE7BA;"
                                                      FontSize="16"
                                                      Foreground="White" />
                                            <TextBlock Text="{Binding ErrorMessage}"
                                                       Foreground="White"
                                                       FontSize="13"
                                                       TextWrapping="Wrap"
                                                       VerticalAlignment="Center" />
                                        </StackPanel>
                                    </Border>

                                    <!-- Success Message -->
                                    <Border Background="{ThemeResource SuccessBrush}"
                                            CornerRadius="{StaticResource RadiusSm}"
                                            Padding="16"
                                            Visibility="{Binding IsSuccess}">
                                        <StackPanel Orientation="Horizontal" Spacing="12">
                                            <FontIcon Glyph="&#xE73E;"
                                                      FontSize="16"
                                                      Foreground="White" />
                                            <TextBlock Text="{Binding SuccessMessage}"
                                                       Foreground="White"
                                                       FontSize="13"
                                                       TextWrapping="Wrap"
                                                       VerticalAlignment="Center" />
                                        </StackPanel>
                                    </Border>

                                    <!-- Form Fields - Two Column for Names -->
                                    <StackPanel Spacing="20">

                                        <!-- Name Row (Two Columns) -->
                                        <Grid ColumnSpacing="16">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>

                                            <!-- Vorname -->
                                            <StackPanel Grid.Column="0" Spacing="8">
                                                <TextBlock Text="Vorname"
                                                           FontSize="13"
                                                           FontWeight="SemiBold"
                                                           Foreground="{ThemeResource OnSurfaceBrush}" />
                                                <TextBox Text="{Binding Vorname, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                         PlaceholderText="Max"
                                                         Padding="12,14"
                                                         CornerRadius="{StaticResource RadiusSm}" />
                                            </StackPanel>

                                            <!-- Nachname -->
                                            <StackPanel Grid.Column="1" Spacing="8">
                                                <TextBlock Text="Nachname"
                                                           FontSize="13"
                                                           FontWeight="SemiBold"
                                                           Foreground="{ThemeResource OnSurfaceBrush}" />
                                                <TextBox Text="{Binding Nachname, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                         PlaceholderText="Mustermann"
                                                         Padding="12,14"
                                                         CornerRadius="{StaticResource RadiusSm}" />
                                            </StackPanel>
                                        </Grid>

                                        <!-- E-Mail -->
                                        <StackPanel Spacing="8">
                                            <TextBlock Text="E-Mail Adresse"
                                                       FontSize="13"
                                                       FontWeight="SemiBold"
                                                       Foreground="{ThemeResource OnSurfaceBrush}" />
                                            <TextBox Text="{Binding Email, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     PlaceholderText="max@beispiel.at"
                                                     Padding="12,14"
                                                     CornerRadius="{StaticResource RadiusSm}" />
                                        </StackPanel>

                                        <!-- Passwort -->
                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Passwort"
                                                       FontSize="13"
                                                       FontWeight="SemiBold"
                                                       Foreground="{ThemeResource OnSurfaceBrush}" />
                                            <PasswordBox Password="{Binding Passwort, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                         PlaceholderText="Mindestens 8 Zeichen"
                                                         Padding="12,14"
                                                         CornerRadius="{StaticResource RadiusSm}" />
                                        </StackPanel>

                                        <!-- Passwort bestaetigen -->
                                        <StackPanel Spacing="8">
                                            <TextBlock Text="Passwort bestätigen"
                                                       FontSize="13"
                                                       FontWeight="SemiBold"
                                                       Foreground="{ThemeResource OnSurfaceBrush}" />
                                            <PasswordBox Password="{Binding PasswortBestaetigung, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                         PlaceholderText="Passwort wiederholen"
                                                         Padding="12,14"
                                                         CornerRadius="{StaticResource RadiusSm}" />
                                        </StackPanel>

                                        <!-- Rollenauswahl -->
                                        <StackPanel Spacing="12" Margin="0,8,0,0">
                                            <TextBlock Text="Ich möchte..."
                                                       FontSize="13"
                                                       FontWeight="SemiBold"
                                                       Foreground="{ThemeResource OnSurfaceBrush}" />
                                            <TextBlock Text="Wählen Sie mindestens eine Option"
                                                       FontSize="12"
                                                       Foreground="{ThemeResource OnSurfaceVariantBrush}"
                                                       Margin="0,-4,0,4" />

                                            <!-- Kaeufer Checkbox -->
                                            <CheckBox IsChecked="{Binding IsBuyer, Mode=TwoWay}"
                                                      Padding="8,0,0,0">
                                                <StackPanel Spacing="2">
                                                    <TextBlock Text="Immobilien suchen"
                                                               FontSize="14"
                                                               FontWeight="SemiBold"
                                                               Foreground="{ThemeResource OnSurfaceBrush}" />
                                                    <TextBlock Text="Als Käufer Angebote entdecken und Anfragen stellen"
                                                               FontSize="12"
                                                               Foreground="{ThemeResource OnSurfaceVariantBrush}"
                                                               TextWrapping="Wrap" />
                                                </StackPanel>
                                            </CheckBox>

                                            <!-- Verkaeufer Checkbox -->
                                            <CheckBox IsChecked="{Binding IsSeller, Mode=TwoWay}"
                                                      Padding="8,0,0,0">
                                                <StackPanel Spacing="2">
                                                    <TextBlock Text="Immobilien anbieten"
                                                               FontSize="14"
                                                               FontWeight="SemiBold"
                                                               Foreground="{ThemeResource OnSurfaceBrush}" />
                                                    <TextBlock Text="Als Verkäufer eigene Objekte inserieren und verwalten"
                                                               FontSize="12"
                                                               Foreground="{ThemeResource OnSurfaceVariantBrush}"
                                                               TextWrapping="Wrap" />
                                                </StackPanel>
                                            </CheckBox>
                                        </StackPanel>

                                    </StackPanel>

                                    <!-- Register Button - Prominent CTA -->
                                    <Button Content="Konto erstellen"
                                            Command="{Binding RegisterCommand}"
                                            Background="{ThemeResource PrimaryButtonBackgroundBrush}"
                                            Foreground="{ThemeResource PrimaryButtonForegroundBrush}"
                                            FontWeight="SemiBold"
                                            FontSize="15"
                                            Height="52"
                                            CornerRadius="{StaticResource RadiusSm}"
                                            HorizontalAlignment="Stretch"
                                            HorizontalContentAlignment="Center" />

                                    <!-- Login Link -->
                                    <StackPanel Orientation="Horizontal"
                                                HorizontalAlignment="Center"
                                                Spacing="6">
                                        <TextBlock Text="Bereits ein Konto?"
                                                   FontSize="14"
                                                   Foreground="{ThemeResource OnSurfaceVariantBrush}" />
                                        <Button uen:Navigation.Request="Login"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                Padding="0"
                                                MinHeight="0"
                                                MinWidth="0">
                                            <TextBlock Text="Anmelden"
                                                       FontSize="14"
                                                       FontWeight="SemiBold"
                                                       Foreground="{ThemeResource PrimaryBrush}" />
                                        </Button>
                                    </StackPanel>

                                </StackPanel>
                            </ScrollViewer>
                        </Border>

                        <!-- Right: Hero Panel - Simple Branding -->
                        <Border Grid.Column="1"
                                Background="{ThemeResource PrimaryButtonBackgroundBrush}">
                            <StackPanel VerticalAlignment="Center"
                                        HorizontalAlignment="Left"
                                        Margin="64,0">
                                <TextBlock Text="HEIMATPLATZ"
                                           FontSize="42"
                                           FontWeight="Bold"
                                           CharacterSpacing="100"
                                           Foreground="{ThemeResource PrimaryButtonForegroundBrush}" />
                                <TextBlock Text="Finden Sie Ihre Traumimmobilie in Oberösterreich"
                                           FontSize="16"
                                           Foreground="{ThemeResource PrimaryButtonForegroundBrush}"
                                           Opacity="0.9"
                                           Margin="0,16,0,0"
                                           TextWrapping="Wrap"
                                           MaxWidth="400" />
                            </StackPanel>
                        </Border>

                    </Grid>
                </DataTemplate>
            </utu:ResponsiveView.WideTemplate>

            <!-- Mobile Layout (Narrow) - Compact Editorial -->
            <utu:ResponsiveView.NarrowTemplate>
                <DataTemplate>
                    <Grid utu:SafeArea.Insets="All"
                          Background="{ThemeResource SurfaceBrush}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <!-- Compact Header with Back -->
                        <Border Grid.Row="0"
                                Background="{ThemeResource PrimaryButtonBackgroundBrush}"
                                Padding="20,16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <!-- Back Button -->
                                <Button Grid.Column="0"
                                        uen:Navigation.Request="-"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Padding="0"
                                        VerticalAlignment="Center">
                                    <FontIcon Glyph="&#xE72B;"
                                              FontSize="18"
                                              Foreground="{ThemeResource PrimaryButtonForegroundBrush}" />
                                </Button>

                                <!-- Centered Title -->
                                <TextBlock Grid.Column="1"
                                           Text="HEIMATPLATZ"
                                           FontSize="14"
                                           FontWeight="Bold"
                                           CharacterSpacing="150"
                                           Foreground="{ThemeResource PrimaryButtonForegroundBrush}"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center" />
                            </Grid>
                        </Border>

                        <!-- Scrollable Form Section -->
                        <ScrollViewer Grid.Row="1">
                            <StackPanel Padding="24,28"
                                        Spacing="24">

                                <!-- Title Section -->
                                <StackPanel Spacing="8">
                                    <TextBlock Text="Konto erstellen"
                                               FontSize="24"
                                               FontWeight="Bold"
                                               Foreground="{ThemeResource OnSurfaceBrush}" />
                                    <TextBlock Text="Registrieren Sie sich für exklusive Angebote"
                                               FontSize="14"
                                               Foreground="{ThemeResource OnSurfaceVariantBrush}"
                                               TextWrapping="Wrap" />
                                </StackPanel>

                                <!-- Error Message -->
                                <Border Background="{ThemeResource ErrorBrush}"
                                        CornerRadius="{StaticResource RadiusSm}"
                                        Padding="14"
                                        Visibility="{Binding ErrorMessage, Converter={StaticResource NullToCollapsedConverter}}">
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <FontIcon Glyph="&#xE7BA;"
                                                  FontSize="14"
                                                  Foreground="White" />
                                        <TextBlock Text="{Binding ErrorMessage}"
                                                   Foreground="White"
                                                   FontSize="13"
                                                   TextWrapping="Wrap"
                                                   VerticalAlignment="Center" />
                                    </StackPanel>
                                </Border>

                                <!-- Success Message -->
                                <Border Background="{ThemeResource SuccessBrush}"
                                        CornerRadius="{StaticResource RadiusSm}"
                                        Padding="14"
                                        Visibility="{Binding IsSuccess}">
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <FontIcon Glyph="&#xE73E;"
                                                  FontSize="14"
                                                  Foreground="White" />
                                        <TextBlock Text="{Binding SuccessMessage}"
                                                   Foreground="White"
                                                   FontSize="13"
                                                   TextWrapping="Wrap"
                                                   VerticalAlignment="Center" />
                                    </StackPanel>
                                </Border>

                                <!-- Form Fields -->
                                <StackPanel Spacing="18">

                                    <!-- Name Row (Two Columns on Mobile too) -->
                                    <Grid ColumnSpacing="12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>

                                        <!-- Vorname -->
                                        <StackPanel Grid.Column="0" Spacing="6">
                                            <TextBlock Text="Vorname"
                                                       FontSize="13"
                                                       FontWeight="SemiBold"
                                                       Foreground="{ThemeResource OnSurfaceBrush}" />
                                            <TextBox Text="{Binding Vorname, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     PlaceholderText="Max"
                                                     Padding="12,14"
                                                     CornerRadius="{StaticResource RadiusSm}" />
                                        </StackPanel>

                                        <!-- Nachname -->
                                        <StackPanel Grid.Column="1" Spacing="6">
                                            <TextBlock Text="Nachname"
                                                       FontSize="13"
                                                       FontWeight="SemiBold"
                                                       Foreground="{ThemeResource OnSurfaceBrush}" />
                                            <TextBox Text="{Binding Nachname, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     PlaceholderText="Mustermann"
                                                     Padding="12,14"
                                                     CornerRadius="{StaticResource RadiusSm}" />
                                        </StackPanel>
                                    </Grid>

                                    <!-- E-Mail -->
                                    <StackPanel Spacing="6">
                                        <TextBlock Text="E-Mail Adresse"
                                                   FontSize="13"
                                                   FontWeight="SemiBold"
                                                   Foreground="{ThemeResource OnSurfaceBrush}" />
                                        <TextBox Text="{Binding Email, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                 PlaceholderText="max@beispiel.at"
                                                 Padding="12,14"
                                                 CornerRadius="{StaticResource RadiusSm}" />
                                    </StackPanel>

                                    <!-- Passwort -->
                                    <StackPanel Spacing="6">
                                        <TextBlock Text="Passwort"
                                                   FontSize="13"
                                                   FontWeight="SemiBold"
                                                   Foreground="{ThemeResource OnSurfaceBrush}" />
                                        <PasswordBox Password="{Binding Passwort, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     PlaceholderText="Mindestens 8 Zeichen"
                                                     Padding="12,14"
                                                     CornerRadius="{StaticResource RadiusSm}" />
                                    </StackPanel>

                                    <!-- Passwort bestaetigen -->
                                    <StackPanel Spacing="6">
                                        <TextBlock Text="Passwort bestätigen"
                                                   FontSize="13"
                                                   FontWeight="SemiBold"
                                                   Foreground="{ThemeResource OnSurfaceBrush}" />
                                        <PasswordBox Password="{Binding PasswortBestaetigung, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                     PlaceholderText="Passwort wiederholen"
                                                     Padding="12,14"
                                                     CornerRadius="{StaticResource RadiusSm}" />
                                    </StackPanel>

                                    <!-- Rollenauswahl -->
                                    <StackPanel Spacing="10" Margin="0,6,0,0">
                                        <TextBlock Text="Ich möchte..."
                                                   FontSize="13"
                                                   FontWeight="SemiBold"
                                                   Foreground="{ThemeResource OnSurfaceBrush}" />
                                        <TextBlock Text="Wählen Sie mindestens eine Option"
                                                   FontSize="12"
                                                   Foreground="{ThemeResource OnSurfaceVariantBrush}"
                                                   Margin="0,-4,0,4" />

                                        <!-- Kaeufer Checkbox -->
                                        <CheckBox IsChecked="{Binding IsBuyer, Mode=TwoWay}"
                                                  Padding="8,0,0,0">
                                            <StackPanel Spacing="2">
                                                <TextBlock Text="Immobilien suchen"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{ThemeResource OnSurfaceBrush}" />
                                                <TextBlock Text="Als Käufer Angebote entdecken"
                                                           FontSize="12"
                                                           Foreground="{ThemeResource OnSurfaceVariantBrush}" />
                                            </StackPanel>
                                        </CheckBox>

                                        <!-- Verkaeufer Checkbox -->
                                        <CheckBox IsChecked="{Binding IsSeller, Mode=TwoWay}"
                                                  Padding="8,0,0,0">
                                            <StackPanel Spacing="2">
                                                <TextBlock Text="Immobilien anbieten"
                                                           FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Foreground="{ThemeResource OnSurfaceBrush}" />
                                                <TextBlock Text="Als Verkäufer Objekte inserieren"
                                                           FontSize="12"
                                                           Foreground="{ThemeResource OnSurfaceVariantBrush}" />
                                            </StackPanel>
                                        </CheckBox>
                                    </StackPanel>

                                </StackPanel>

                                <!-- Register Button -->
                                <Button Content="Konto erstellen"
                                        Command="{Binding RegisterCommand}"
                                        Background="{ThemeResource PrimaryButtonBackgroundBrush}"
                                        Foreground="{ThemeResource PrimaryButtonForegroundBrush}"
                                        FontWeight="SemiBold"
                                        FontSize="15"
                                        Height="52"
                                        CornerRadius="{StaticResource RadiusSm}"
                                        HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Center" />

                                <!-- Login Link -->
                                <StackPanel Orientation="Horizontal"
                                            HorizontalAlignment="Center"
                                            Spacing="6">
                                    <TextBlock Text="Bereits ein Konto?"
                                               FontSize="14"
                                               Foreground="{ThemeResource OnSurfaceVariantBrush}" />
                                    <TextBlock Text="Anmelden"
                                               FontSize="14"
                                               FontWeight="SemiBold"
                                               Foreground="{ThemeResource OnSurfaceBrush}"
                                               TextDecorations="Underline" />
                                </StackPanel>

                            </StackPanel>
                        </ScrollViewer>

                    </Grid>
                </DataTemplate>
            </utu:ResponsiveView.NarrowTemplate>

        </utu:ResponsiveView>

    </uc:BusyOverlay>

</Page>
