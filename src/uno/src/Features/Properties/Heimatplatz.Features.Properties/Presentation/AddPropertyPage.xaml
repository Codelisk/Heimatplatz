<Page x:Class="Heimatplatz.Features.Properties.Presentation.AddPropertyPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:Heimatplatz.Features.Properties.Presentation"
      xmlns:models="using:Heimatplatz.Features.Properties.Contracts.Models"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>
        <!-- Consistent corner radius for all input controls -->
        <Style TargetType="TextBox" BasedOn="{StaticResource DefaultTextBoxStyle}">
            <Setter Property="CornerRadius" Value="{StaticResource RadiusSm}" />
        </Style>
        <Style TargetType="ComboBox" BasedOn="{StaticResource DefaultComboBoxStyle}">
            <Setter Property="CornerRadius" Value="{StaticResource RadiusSm}" />
        </Style>
    </Page.Resources>

    <ScrollViewer>
        <StackPanel Padding="12" Spacing="8" MaxWidth="900">

            <!-- Header -->
            <TextBlock Text="Immobilie hinzufügen"
                       Style="{StaticResource TitleTextBlockStyle}"
                       Margin="0,0,0,8" />

            <!-- Success/Error Messages -->
            <InfoBar Visibility="{Binding ShowSuccess, Mode=OneWay}"
                     Severity="Success"
                     Title="Erfolgreich"
                     Message="Immobilie wurde erstellt."
                     IsClosable="True"
                     IsOpen="True" />

            <InfoBar Visibility="{Binding HasError, Mode=OneWay}"
                     Severity="Error"
                     Title="Fehler"
                     Message="{Binding ErrorMessage, Mode=OneWay}"
                     IsClosable="True"
                     IsOpen="True" />

            <Grid ColumnSpacing="8" RowSpacing="8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <ComboBox Grid.Column="0"
                          Grid.Row="0"
                          Header="Immobilientyp *"
                          ItemsSource="{Binding PropertyTypes}"
                          SelectedItem="{Binding SelectedPropertyTypeItem, Mode=TwoWay}"
                          DisplayMemberPath="DisplayName"
                          HorizontalAlignment="Stretch"
                          MinWidth="200" />

                <ComboBox Grid.Column="1"
                          Grid.Row="0"
                          Header="Anbietertyp *"
                          SelectedItem="{Binding SelectedAnbieterTyp, Mode=TwoWay}"
                          HorizontalAlignment="Stretch"
                          MinWidth="200">
                    <x:String>Privat</x:String>
                    <x:String>Makler</x:String>
                </ComboBox>

                <TextBox Grid.Column="0"
                         Grid.Row="1"
                         Grid.ColumnSpan="2"
                         Header="Titel *"
                         Text="{Binding Titel, Mode=TwoWay}"
                         PlaceholderText="z.B. Schöne 3-Zimmer Wohnung" />
            </Grid>

            <TextBox Header="Beschreibung *"
                     Text="{Binding Beschreibung, Mode=TwoWay}"
                     PlaceholderText="Detaillierte Beschreibung (mind. 50 Zeichen)"
                     TextWrapping="Wrap"
                     AcceptsReturn="True"
                     MinHeight="80"
                     MaxHeight="200" />

            <Grid ColumnSpacing="8" RowSpacing="8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="100" />
                </Grid.ColumnDefinitions>

                <TextBox Grid.Column="0"
                         Header="Adresse *"
                         Text="{Binding Adresse, Mode=TwoWay}"
                         PlaceholderText="Straße und Hausnummer"
                         MinWidth="150" />

                <TextBox Grid.Column="1"
                         Header="Ort *"
                         Text="{Binding Ort, Mode=TwoWay}"
                         PlaceholderText="z.B. Linz"
                         MinWidth="120" />

                <TextBox Grid.Column="2"
                         Header="PLZ *"
                         Text="{Binding Plz, Mode=TwoWay}"
                         PlaceholderText="4020"
                         InputScope="Number"
                         MinWidth="80" />
            </Grid>

            <!-- Preis & Anbieter -->
            <Grid ColumnSpacing="8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <TextBox Grid.Column="0"
                         Header="Preis (€) *"
                         Text="{Binding Preis, Mode=TwoWay}"
                         PlaceholderText="z.B. 350000"
                         InputScope="Number"
                         MinWidth="150" />

                <TextBox Grid.Column="1"
                         Header="Anbieter-Name *"
                         Text="{Binding AnbieterName, Mode=TwoWay}"
                         PlaceholderText="Ihr Name"
                         MinWidth="150" />
            </Grid>

            <!-- Immobilien-Details (Haus) -->
            <StackPanel Spacing="8"
                        Visibility="{Binding IsHouseType, Mode=OneWay}">
                <Grid ColumnSpacing="8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1.5*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <TextBox Grid.Column="0"
                             Header="Wohnfläche (m²)"
                             Text="{Binding WohnflaecheM2, Mode=TwoWay}"
                             PlaceholderText="90"
                             InputScope="Number"
                             MinWidth="120" />

                    <TextBox Grid.Column="1"
                             Header="Zimmer"
                             Text="{Binding Zimmer, Mode=TwoWay}"
                             PlaceholderText="3"
                             InputScope="Number"
                             MinWidth="100" />

                    <TextBox Grid.Column="2"
                             Header="Baujahr"
                             Text="{Binding Baujahr, Mode=TwoWay}"
                             PlaceholderText="2005"
                             InputScope="Number"
                             MinWidth="100" />
                </Grid>
            </StackPanel>

            <!-- Grundstück (Land) -->
            <StackPanel Spacing="8"
                        Visibility="{Binding IsLandType, Mode=OneWay}">
                <TextBox Header="Grundstücksfläche (m²)"
                         Text="{Binding GrundstuecksflaecheM2, Mode=TwoWay}"
                         PlaceholderText="500"
                         InputScope="Number"
                         MinWidth="150" />
            </StackPanel>

            <!-- Primary Action -->
            <Button Content="Speichern"
                    Command="{Binding SavePropertyCommand}"
                    HorizontalAlignment="Stretch"
                    Height="48"
                    Margin="0,16,0,8"
                    Style="{StaticResource AccentButtonStyle}"
                    CornerRadius="{StaticResource RadiusSm}" />

            <TextBlock Text="* Pflichtfelder"
                       FontSize="11"
                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                       Margin="0,4,0,0" />

        </StackPanel>
    </ScrollViewer>
</Page>
